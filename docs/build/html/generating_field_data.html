

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Field Data &mdash; IFEWs 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Generating Samples" href="generating_samples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> IFEWs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="openMDAO.html">Airfoil with CST Parametrization</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="options_description.html">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="generating_samples.html">Generating Samples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting Field Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#accessing-field-output">Accessing field output</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IFEWs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="openMDAO.html">Airfoil with CST Parametrization</a> &raquo;</li>
        
      <li>Getting Field Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/generating_field_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="getting-field-data">
<span id="generating-field-data"></span><h1>Getting Field Data<a class="headerlink" href="#getting-field-data" title="Permalink to this heading">¶</a></h1>
<p>This tutorial is very similar to the <a class="reference internal" href="generating_samples.html#generating-samples"><span class="std std-ref">generating samples tutorial</span></a>, going through that is highly recommended before
proceeding ahead. There are couple of options which need to be set so that field data is also obtained.
Following snippet of the code shows the blackbox options dictionary with those two options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Options for blackbox</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;solverOptions&quot;</span><span class="p">:</span> <span class="n">solverOptions</span><span class="p">,</span>
    <span class="s2">&quot;directory&quot;</span><span class="p">:</span> <span class="s2">&quot;multi&quot;</span><span class="p">,</span>
    <span class="s2">&quot;noOfProcessors&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="s2">&quot;aeroProblem&quot;</span><span class="p">:</span> <span class="n">ap</span><span class="p">,</span>
    <span class="s2">&quot;airfoilFile&quot;</span><span class="p">:</span> <span class="s2">&quot;rae2822.dat&quot;</span><span class="p">,</span>
    <span class="s2">&quot;numCST&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
    <span class="s2">&quot;meshingOptions&quot;</span><span class="p">:</span> <span class="n">meshingOptions</span><span class="p">,</span>
    <span class="s2">&quot;getFlowFieldData&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># Option which enables field data extraction</span>
    <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;field&quot;</span> <span class="c1"># defines the region of extraction</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">surfaceVariables</span></code> option in solver option dictionary controls which variables to extract. Please refer <a class="reference external" href="https://mdolab-adflow.readthedocs-hosted.com/en/latest/options.html#surfaceVariables">adflow options</a>
for more details. Initializing the <code class="docutils literal notranslate"><span class="pre">AirfoilCST</span></code> class and adding design variables is similar to what is described in generating samples tutorial.</p>
<section id="accessing-field-output">
<h2>Accessing field output<a class="headerlink" href="#accessing-field-output" title="Permalink to this heading">¶</a></h2>
<p>Generating the samples and reading all the output data is exactly same as described in generating samples tutorial. There is only one additional file:
<code class="docutils literal notranslate"><span class="pre">fieldData.mat</span></code>. It contains following quatities:</p>
<ul>
<li><p><strong>Input variable</strong>: a 2D numpy array <code class="docutils literal notranslate"><span class="pre">x</span></code> in which each row represents a specific sample based on which analysis is performed. The number
of rows will be usually equal to the number of samples argument in the <code class="docutils literal notranslate"><span class="pre">generateSamples</span></code> method. But, many times few of the analysis
fail. It depends a lot on the solver and meshing options, so set those options after some tuning.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The order of values in each row is based on how you add design variables. In this tutorial, first <code class="docutils literal notranslate"><span class="pre">alpha</span></code> is added as
design variable. Then, lower and upper surface CST coefficients are added. Thus, first value in each row will be alpha, next 6
values will be upper surface CST coefficients and last 6 will be lower surface CST coefficients.</p>
</div>
</li>
<li><p><strong>Output variables</strong>: it contains all the variables mention in the <code class="docutils literal notranslate"><span class="pre">surfaceVariables</span></code> option for solver. When the file is loaded, you will get a dictionary.
The keys in the dictionary will depend on the entries in the <code class="docutils literal notranslate"><span class="pre">surfaceVariables</span></code> option. Value for each key is a numpy array. Refer below table for more
information. <em>n</em> is the number of samples and <em>k</em> is the number of points (in surface or entire field).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 50%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Possible value in <code class="docutils literal notranslate"><span class="pre">surfaceVariables</span></code></p></th>
<th class="head"><p>Matching key in dictionary</p></th>
<th class="head"><p>Size</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>rho</em></p></td>
<td><p><em>Density</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>p</em></p></td>
<td><p><em>Pressure</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-even"><td><p><em>temp</em></p></td>
<td><p><em>Temperature</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>cp</em></p></td>
<td><p><em>CoefPressure</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-even"><td><p><em>ptloss</em></p></td>
<td><p><em>RelativePressureStagnationLoss</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>mach</em></p></td>
<td><p><em>Mach</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-even"><td><p><em>cf</em></p></td>
<td><p><em>SkinFrictionMagnitude</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>ch</em></p></td>
<td><p><em>StantonNumber</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-even"><td><p><em>yplus</em></p></td>
<td><p><em>YPlus</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>yplus</em></p></td>
<td><p><em>YPlus</em></p></td>
<td><p><em>n x k</em></p></td>
</tr>
<tr class="row-even"><td><p><em>vx</em>, <em>vy</em>, <em>vz</em></p></td>
<td><p><em>Velocity</em></p></td>
<td><p><em>n x k x 3</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>cfx</em>, <em>cfy</em>, <em>cfz</em></p></td>
<td><p><em>SkinFriction</em></p></td>
<td><p><em>n x k x 3</em></p></td>
</tr>
</tbody>
</table>
<p>Following snippet shows how to access few of those variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="s2">&quot;fieldData.mat&quot;</span><span class="p">)</span> <span class="c1"># mention the location of mat file</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">mach</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Mach&quot;</span><span class="p">]</span>
<span class="n">cp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;CoefPressure&quot;</span><span class="p">]</span>
<span class="n">velocity</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Velocity&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="generating_samples.html" class="btn btn-neutral float-left" title="Generating Samples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, CODE Lab.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>